{% extends "base.twig.html" %}
{% block main %}
    <main class="fenetre__contacts">
        <h2>Contacts</h2>
        <a href="contact/tout?ajout=oui"><img src="https://s2.svgbox.net/hero-solid.svg?ic=plus&color=000000" width="32" height="32"></a>
        
        {% if _get.ajout is not null %}
        <section>
            <form action="contact/ajout" method="POST">
                <input type="text" name="ctc_prenom" id="ctc_prenom" placeholder="Prénom" required>
                <input type="text" name="ctc_nom" id="ctc_nom" placeholder="Nom" required>
                <select name="tel_type" id="tel_type" required>
                    <option value="Choisir" selected>-- Type --</option>
                    <option value="Cellulaire">Cellulaire</option>
                    <option value="Domicile">Domicile</option>
                    <option value="Bureau">Bureau</option>
                    <option value="Autre">Autre</option>
                </select>
                {# <input type="select" name="tel_type" id="tel_type" value="{{_get.telType}}" placeholder="Type"> #}
                <input type="text" name="tel_numero" id="tel_numero" placeholder="Numéro de téléphone" required>
                <input type="text" name="tel_poste" id="tel_poste" placeholder="Poste (Facultatif)">
                <button type="submit">Ajouter</button>
            </form>
        </section>
        {% endif %}
        {% if _get.idModification is not null %}
        <section>
            <form action="contact/modification" method="POST">
                <input type="text" name="ctc_id" id="ctc_prenom" value="{{_get.idModification}}" hidden>
                <input type="text" name="tel_ctc_id_ce" id="tel_ctc_id_ce" value="{{_get.telCtcIdCe}}" hidden>
                <input type="text" name="ctc_prenom" id="ctc_prenom" value="{{_get.prenom}}" placeholder="Prénom">
                <input type="text" name="ctc_nom" id="ctc_nom" value="{{_get.nom}}" placeholder="Nom">
                <select name="tel_type" id="tel_type">
                    <option value="Cellulaire" {{ _get.telType == "Cellulaire" ? "selected" : '' }}>Cellulaire</option>
                    <option value="Domicile" {{ _get.telType == "Domicile" ? "selected" : '' }}>Domicile</option>
                    <option value="Bureau" {{ _get.telType == "Bureau" ? "selected" : '' }}>Bureau</option>
                    <option value="Autre" {{ _get.telType == "Autre" ? "selected" : '' }}>Autre</option>
                </select>
                {# <input type="select" name="tel_type" id="tel_type" value="{{_get.telType}}" placeholder="Type"> #}
                <input type="text" name="tel_numero" id="tel_numero" value="{{_get.telNumero}}" placeholder="Numéro de téléphone">
                <input type="text" name="tel_poste" id="tel_poste" value="{{_get.telPoste}}" placeholder="Poste">
                <button type="submit">Enregistrer les modifications</button>
            </form>
        </section>
        {% endif %}
        <section>
            <ul class="fenetre__contacts-liste_contacts">
            {% for contact in contacts %}
            
                
                    <li class="fenetre__contacts-liste_item">
                    <div class="fenetre__contacts-icones_container">
                        <a href="contact/tout/?idModification={{contact.ctc_id}}&telCtcIdCe={{contact.tel_ctc_id_ce}}&prenom={{contact.ctc_prenom}}&nom={{contact.ctc_nom}}&telType={{contact.tel_type}}&telNumero={{contact.tel_numero}}{% if contact.tel_poste %}&telPoste={{contact.tel_poste}}{% endif %}"><img src="https://s2.svgbox.net/hero-solid.svg?ic=pencil&color=000000" width="18" height="18"></a>
                        <a href="contact/suppression?idSuppression={{contact.ctc_id}}"><img src="https://s2.svgbox.net/hero-solid.svg?ic=x&color=000000" width="18" height="18"></a>
                    </div>
                    <div class="fenetre__contacts-infos_container">
                        <div class="fenetre__contacts-nom_contact">
                            <span class="fenetre__contacts-nom">{{contact.ctc_prenom}} {{contact.ctc_nom}}</span>
                        </div>  
                        <div class="fenetre__contacts-infos_contact">
                            <span class="fenetre__contacts-tel_type">{{contact.tel_type}} : </span>
                            <span class="fenetre__contacts-tel_numero">{{contact.tel_numero}}</span>
                            {% if contact.tel_poste %} <span class="fenetre__contacts-tel_poste">Poste: {{contact.tel_poste}}</span> {% endif %} 
                        </div> 
                    </div>
                </li>
                
                
                
            {% endfor %}
            </ul>
        </section>
    </main>
{% endblock %}